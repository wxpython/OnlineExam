# a = 'var PaperList = [{"TestID":1,"LessonName":"语文","QuesID":1,"QuesName":"1","UserRight":0,"MCaption":"1","MPart":"10;;0;1","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_1_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":1,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":2,"QuesName":"2","UserRight":0,"MCaption":"2.1?2.2?2.3","MPart":"2,2,2;,,;0,0,0;0,0,0","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_2_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":7,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":3,"QuesName":"4","UserRight":0,"MCaption":"4","MPart":"2;;0;1","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_3_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":8,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":4,"QuesName":"6","UserRight":0,"MCaption":"6","MPart":"6;;0;2","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_4_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":9,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":5,"QuesName":"7-8","UserRight":0,"MCaption":"7?8","MPart":"2,2;,;0,0;0,0","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_5_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":10,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":6,"QuesName":"10-11","UserRight":0,"MCaption":"10?11","MPart":"2,3;,;0,0;0,0","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_6_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":11,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":7,"QuesName":"12-13","UserRight":0,"MCaption":"12?13","MPart":"3,4;,;0,0;0,0","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_7_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":12,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":8,"QuesName":"14","UserRight":0,"MCaption":"14","MPart":"4;;0;1","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_8_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":13,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":9,"QuesName":"15","UserRight":0,"MCaption":"15","MPart":"2;;0;1","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_9_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":14,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":10,"QuesName":"16","UserRight":0,"MCaption":"16","MPart":"6;;0;2","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_10_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":2,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":11,"QuesName":"17","UserRight":0,"MCaption":"17","MPart":"3;;0;1","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_11_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":3,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":12,"QuesName":"18-19","UserRight":0,"MCaption":"18?19","MPart":"3,4;,;0,0;0,0","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_12_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":4,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":13,"QuesName":"20","UserRight":0,"MCaption":"20","MPart":"3;;0;1","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_13_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":5,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0},{"TestID":1,"LessonName":"语文","QuesID":14,"QuesName":"作文","UserRight":0,"MCaption":"作文?书写","MPart":"60,3;,;0,0;7,0","ControlValue":5,"UTimeOut":0,"TaskNumber":0,"ClientBuffer":10,"ClientMBuffer":10,"UserInfo":"381078YW005_14_1_0","MarkedCnt":0,"MarkedSum":0.0,"MarkedSpeed":0.0,"QOControlInfo":0,"MySetting":0,"QwId":6,"UserCheckSetting":0,"IsFirst":true,"IsCurrent":false,"ManageStyle":0}];'


# import re

# PaperList = re.search('PaperList = (\[.+?\])', a).group(1)
# # print(PaperList)


# from urllib.parse import quote

# # 要编码的字符串
# original_string = "4"

# # 进行URL编码
# encoded_string = quote(original_string)

# print(encoded_string)
# Accounts = ['381078SW015']
# a = Accounts[0][6:8]
# print(a)
# exit()


import json
from typing import List, Dict, Callable, Any

def read_json_files(file_names: List[str]) -> List[Dict[str, Any]]:
    """
    读取多个 JSON 文件并返回它们的内容列表。
    
    Args:
        file_names: JSON 文件名列表
        
    Returns:
        List[Dict[str, Any]]: 包含每个 JSON 文件内容的字典列表
    """
    data_list = []
    for file_name in file_names:
        try:
            with open(file_name, 'r', encoding='utf-8') as f:
                data = json.load(f)
                data_list.append(data)
        except FileNotFoundError:
            print(f"警告: 文件 {file_name} 未找到，跳过")
        except json.JSONDecodeError as e:
            print(f"警告: 文件 {file_name} 不是有效的 JSON 格式，跳过。错误: {e}")
    return data_list

def merge_json_files(file_names: List[str], output_file: str, merge_func: Callable[[Dict[str, Any], Dict[str, Any]], Dict[str, Any]] = None) -> None:
    """
    读取多个 JSON 文件并合并它们的内容到一个新的 JSON 文件。
    
    Args:
        file_names: JSON 文件名列表
        output_file: 输出文件名
        merge_func: 合并函数，默认为简单的字典合并，后面的 JSON 文件会覆盖前面的同名键
    """
    # 读取所有 JSON 文件
    data_list = read_json_files(file_names)
    
    # 如果没有数据，直接返回
    if not data_list:
        print("没有有效的 JSON 数据可以合并")
        return
    
    # 如果没有提供自定义合并函数，使用默认的字典合并
    if merge_func is None:
        # 初始化合并数据为第一个 JSON 文件的数据
        merged_data = data_list[0].copy()
        # 逐个合并后续的 JSON 文件数据
        for data in data_list[1:]:
            merged_data.update(data)
    else:
        # 使用自定义合并函数
        merged_data = data_list[0].copy()
        for data in data_list[1:]:
            merged_data = merge_func(merged_data, data)
    
    # 写入合并后的数据到新的 JSON 文件
    try:
        with open(output_file, 'w', encoding='utf-8') as f:
            json.dump(merged_data, f, ensure_ascii=False, indent=4)
        print(f"已将 JSON 数据合并到 {output_file}")
    except IOError as e:
        print(f"写入文件 {output_file} 时出错: {e}")

# 示例用法
if __name__ == "__main__":
    # 定义 JSON 文件名列表
    json_files = ["1.json", "2.json"]
    
    # 定义输出文件名
    output_file = "merged_data.json"
    
    # 如果需要自定义合并逻辑，可以定义一个合并函数，例如：
    # def custom_merge(a: Dict[str, Any], b: Dict[str, Any]) -> Dict[str, Any]:
    #     # 自定义合并逻辑
    #     pass
    
    # 执行合并操作
    merge_json_files(json_files, output_file)
